<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: layout(~{::section}, ${project?.title ?: 'Project Details'})}">

<section>
    <div th:if="${project != null}">
        <!-- Back Button -->
        <div class="mb-4">
            <a th:href="@{/projects}" class="btn btn-outline-secondary btn-sm">
                <i class="bi bi-arrow-left me-2"></i>Back to Projects
            </a>
        </div>

        <!-- Project Card -->
        <div class="card rounded-4 shadow border-0 overflow-hidden">
            <!-- Project Image -->
            <div th:if="${project.imageUrl != null and !#strings.isEmpty(project.imageUrl)}"
                 style="height: 400px; overflow: hidden; background: #f8f9fa;">
                <img th:src="@{${project.imageUrl}}"
                     class="w-100 h-100"
                     th:alt="${project.title}"
                     style="object-fit: cover;">
            </div>

            <!-- Placeholder if no image -->
            <div th:unless="${project.imageUrl != null and !#strings.isEmpty(project.imageUrl)}"
                 class="project-placeholder-large">
                <i class="bi bi-image" style="font-size: 6rem; opacity: 0.3;"></i>
            </div>

            <div class="card-body p-4 p-md-5">
                <!-- Title and Featured Badge -->
                <div class="mb-4">
                    <h1 class="h2 fw-bold mb-2" th:text="${project.title}">Project Title</h1>
                    <p class="text-muted lead mb-3"
                       th:if="${project.subtitle != null and !#strings.isEmpty(project.subtitle)}"
                       th:text="${project.subtitle}">
                        Project Subtitle
                    </p>
                    <span th:if="${project.featured}"
                          class="badge bg-warning text-dark fs-6">
                        <i class="bi bi-star-fill me-1"></i>Featured Project
                    </span>
                </div>

                <!-- Tech Stack -->
                <div class="mb-4">
                    <h4 class="h5 fw-bold mb-3">
                        <i class="bi bi-stack text-primary me-2"></i>Technologies Used
                    </h4>
                    <div class="d-flex flex-wrap gap-2">
                        <span th:each="tech : ${#strings.arraySplit(project.techStack, ',')}"
                              class="badge bg-primary text-white">
                            <span th:text="${#strings.trim(tech)}">Technology</span>
                        </span>
                    </div>
                </div>

                <!-- Short Description -->
                <div th:if="${project.shortDescription != null and !#strings.isEmpty(project.shortDescription)}"
                     class="mb-4">
                    <h4 class="h5 fw-bold mb-3">
                        <i class="bi bi-file-text text-primary me-2"></i>Overview
                    </h4>
                    <p class="lead" th:text="${project.shortDescription}">Short description</p>
                </div>

                <!-- Full Description -->
                <div th:if="${project.description != null and !#strings.isEmpty(project.description)}"
                     class="mb-4">
                    <h4 class="h5 fw-bold mb-3">
                        <i class="bi bi-info-circle text-primary me-2"></i>Description
                    </h4>
                    <div class="card border-0 bg-light p-4 rounded-3">
                        <p class="mb-0" th:text="${project.description}">Full description</p>
                    </div>
                </div>

                <!-- Project Links -->
                <div class="mb-4">
                    <h4 class="h5 fw-bold mb-3">
                        <i class="bi bi-link-45deg text-primary me-2"></i>Project Links
                    </h4>
                    <div class="d-flex gap-3 flex-wrap">
                        <a th:if="${project.githubUrl != null and !#strings.isEmpty(project.githubUrl)}"
                           th:href="${project.githubUrl}"
                           target="_blank"
                           class="btn btn-dark btn-lg">
                            <i class="bi bi-github me-2"></i>View Source Code
                        </a>
                        <a th:if="${project.liveUrl != null and !#strings.isEmpty(project.liveUrl)}"
                           th:href="${project.liveUrl}"
                           target="_blank"
                           class="btn btn-primary btn-lg">
                            <i class="bi bi-box-arrow-up-right me-2"></i>Live Demo
                        </a>
                    </div>
                </div>

                <!-- Created Date -->
                <div class="text-muted small border-top pt-3">
                    <i class="bi bi-calendar me-1"></i>
                    Created on <span th:text="${#temporals.format(project.createdAt, 'MMMM dd, yyyy')}">Date</span>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="text-center mt-4">
            <a th:href="@{/projects}" class="btn btn-outline-primary">
                <i class="bi bi-grid me-2"></i>View All Projects
            </a>
        </div>
    </div>

    <!-- Project Not Found -->
    <div th:unless="${project != null}" class="text-center py-5">
        <div class="card border-0 shadow-sm p-5">
            <i class="bi bi-exclamation-triangle text-warning" style="font-size: 5rem;"></i>
            <h2 class="h4 mt-4 mb-2">Project Not Found</h2>
            <p class="text-muted mb-4">The project you're looking for doesn't exist.</p>
            <a th:href="@{/projects}" class="btn btn-primary">
                <i class="bi bi-arrow-left me-2"></i>Back to Projects
            </a>
        </div>
    </div>
</section>

<style>
    .project-placeholder-large {
        height: 400px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }

    .badge.fs-6 {
        padding: 0.5rem 1rem;
        font-weight: 500;
    }
</style>
</html>