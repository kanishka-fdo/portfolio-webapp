<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: layout(~{::section}, 'Projects')}">

<section>
    <div class="text-center mb-5 animate-fade-in">
        <h1 class="display-5 fw-bold mb-3">
            <i class="bi bi-folder-fill text-primary me-2"></i>My Projects
        </h1>
        <p class="lead text-muted">
            Explore my portfolio of <span class="fw-bold text-primary" th:text="${projects != null ? projects.size() : 0}">0</span> projects
        </p>
    </div>

    <!-- All Projects -->
    <div th:if="${projects != null and !#lists.isEmpty(projects)}" class="animate-fade-in">
        <div class="row g-4 mb-5">
            <div class="col-md-6 col-lg-4" th:each="p : ${projects}">
                <div class="card h-100 border-0 shadow-sm hover-card">
                    <!-- Project Image -->
                    <div class="position-relative overflow-hidden project-image-wrapper">
                        <img th:if="${p.imageUrl != null and !#strings.isEmpty(p.imageUrl)}"
                             th:src="@{${p.imageUrl}}"
                             class="w-100 h-100 project-image"
                             th:alt="${p.title}"
                             style="object-fit: cover;">

                        <div th:unless="${p.imageUrl != null and !#strings.isEmpty(p.imageUrl)}"
                             class="project-placeholder">
                            <i class="bi bi-image" style="font-size: 3rem; opacity: 0.5;"></i>
                        </div>

                        <!-- Featured Badge -->
                        <span th:if="${p.featured}"
                              class="badge bg-warning text-dark position-absolute top-0 end-0 m-3">
                            <i class="bi bi-star-fill me-1"></i>Featured
                        </span>
                    </div>

                    <div class="card-body d-flex flex-column">
                        <!-- Title -->
                        <h3 class="h5 fw-bold mb-2" th:text="${p.title}">Project Title</h3>

                        <!-- Subtitle -->
                        <p class="text-muted small mb-2"
                           th:if="${p.subtitle != null and !#strings.isEmpty(p.subtitle)}"
                           th:text="${p.subtitle}">
                            Subtitle
                        </p>

                        <!-- Short Description -->
                        <p class="flex-grow-1 text-muted mb-3"
                           th:text="${p.shortDescription}">
                            Project description
                        </p>

                        <!-- Tech Stack -->
                        <div class="mb-3">
                            <div class="d-flex flex-wrap gap-2">
                                <span th:each="tech : ${#strings.arraySplit(p.techStack, ',')}"
                                      class="badge bg-light text-dark border">
                                    <span th:text="${#strings.trim(tech)}">Tech</span>
                                </span>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="d-flex gap-2">
                            <a class="btn btn-primary btn-sm flex-grow-1"
                               th:href="@{/projects/{id}(id=${p.id})}">
                                <i class="bi bi-eye me-1"></i>View Details
                            </a>
                            <a th:if="${p.githubUrl != null and !#strings.isEmpty(p.githubUrl)}"
                               th:href="${p.githubUrl}"
                               target="_blank"
                               class="btn btn-outline-dark btn-sm"
                               title="GitHub">
                                <i class="bi bi-github"></i>
                            </a>
                            <a th:if="${p.liveUrl != null and !#strings.isEmpty(p.liveUrl)}"
                               th:href="${p.liveUrl}"
                               target="_blank"
                               class="btn btn-outline-primary btn-sm"
                               title="Live Demo">
                                <i class="bi bi-box-arrow-up-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- No Projects Message -->
    <div th:unless="${projects != null and !#lists.isEmpty(projects)}"
         class="text-center py-5">
        <div class="card border-0 shadow-sm p-5">
            <i class="bi bi-folder-x text-muted" style="font-size: 5rem; opacity: 0.3;"></i>
            <h3 class="h4 mt-4 mb-2">No Projects Yet</h3>
            <p class="text-muted mb-0">Projects will appear here once they are added</p>
        </div>
    </div>

    <!-- Back to Home Button -->
    <div class="text-center mt-4">
        <a th:href="@{/}" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left me-2"></i>Back to Home
        </a>
    </div>
</section>

<style>
    .animate-fade-in {
        animation: fadeIn 0.6s ease-in;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .hover-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .hover-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15) !important;
    }

    .project-image-wrapper {
        height: 220px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .project-image {
        transition: transform 0.3s ease;
    }

    .hover-card:hover .project-image {
        transform: scale(1.1);
    }

    .project-placeholder {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
    }

    .badge.border {
        font-weight: 500;
        padding: 0.35em 0.65em;
    }
</style>
</html>